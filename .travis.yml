language: php

php:
    - 7.1

sudo: false

script:
  - pwd
  - echo $TRAVIS_PULL_REQUEST_SHA
  - TRAVIS_BASE_COMMIT_SHA=$(echo $TRAVIS_COMMIT_RANGE|sed -e "s/\.\.\..*//g")
  - echo $TRAVIS_BASE_COMMIT_SHA
  - echo $TRAVIS_PULL_REQUEST_BRANCH
  - echo $TRAVIS_EVENT_TYPE
  - echo $TRAVIS_COMMIT_RANGE
  - echo $TRAVIS_BUILD_DIR
  - echo $TRAVIS_BRANCH
  - BASE_VERSION_DIR=base_version
  - PR_VERSION_DIR=pr_version
  - mkdir $BASE_VERSION_DIR
  - find . -maxdepth 1 ! -regex '.*/$BASE_VERSION_DIR' ! -regex '.' -exec mv '{}' $BASE_VERSION_DIR \;
  - cp -r $BASE_VERSION_DIR $PR_VERSION_DIR
  - ls -la
  - cd $BASE_VERSION_DIR
  - ls -la
  - git branch base_version $TRAVIS_BASE_COMMIT_SHA
  - php php-semver-checker.phar compare --help
  - php php-semver-checker.phar compare ./ ../$PR_VERSION_DIR -vvv
