parameters:
    oropro_elasticsearch.engine.class: OroPro\Bundle\ElasticSearchBundle\Engine\ElasticSearch
    oropro_elasticsearch.engine.index_agent.class: OroPro\Bundle\ElasticSearchBundle\Engine\IndexAgent
    oropro_elasticsearch.client.factory.class: OroPro\Bundle\ElasticSearchBundle\Client\ClientFactory
    oropro_elasticsearch.type_mapping:
        text:
            type: string
            store: true
            index: not_analyzed
        decimal:
            type: double
            store: true
        integer:
            type: integer
            store: true
        datetime:
            type: date
            store: true
            format: "yyyy-MM-dd HH:mm:ss||yyyy-MM-dd"

services:
    oro_search.search.engine:
        class: %oropro_elasticsearch.engine.class%
        arguments:
            - @doctrine
            - @event_dispatcher
            - @oro_entity.doctrine_helper
            - @oro_search.mapper
            - @oropro_elasticsearch.engine.index_agent
        calls:
            - [setLogQueries, [%oro_search.log_queries%]]

    oropro_elasticsearch.engine.index_agent:
        class: %oropro_elasticsearch.engine.index_agent.class%
        arguments:
            - @oropro_elasticsearch.client.factory
            - %oro_search.engine_parameters%
            - %oro_search.entities_config%
        calls:
            - [setTypeMapping, [%oropro_elasticsearch.type_mapping%]]

    oropro_elasticsearch.client.factory:
        class: %oropro_elasticsearch.client.factory.class%
