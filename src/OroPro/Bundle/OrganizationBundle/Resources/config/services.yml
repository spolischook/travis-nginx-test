parameters:
    oropro_organization.entity.class:                                       Oro\Bundle\OrganizationBundle\Entity\Organization

    oropro_organization.twig.extension.organization.class:                  OroPro\Bundle\OrganizationBundle\Twig\OrganizationExtension
    oropro_organization.exclusion_provider.config.class:                    OroPro\Bundle\OrganizationBundle\Provider\OrganizationExclusionProvider
    oropro_organization.request.param_converter.class:                      OroPro\Bundle\OrganizationBundle\Request\ParamConverter\RequestReportParamConverter

    oropro_organization.event_listener.authefication.class:                 OroPro\Bundle\OrganizationBundle\EventListener\AuthenticationListener
    oropro_organization.content_provider.organization_switch.class:         OroPro\Bundle\OrganizationBundle\ContentProvider\OrganizationSwitchContentProvider

    # Overrides
    oro_entity.listener.navigation_listener.class:                          OroPro\Bundle\OrganizationBundle\EventListener\EntityNavigationListener
    oro_report.listener.navigation_listener.class:                          OroPro\Bundle\OrganizationBundle\EventListener\ReportNavigationListener
services:
    oropro_organization.twig.extension.organization:
        class: %oropro_organization.twig.extension.organization.class%
        arguments:
            - @oro_entity_config.provider.organization
            - @doctrine
            - @translator
        tags:
            - { name: twig.extension }

    oropro_organization.exclusion_provider:
        class: %oropro_organization.exclusion_provider.config.class%
        arguments:
            - @oro_security.security_facade.link
            - @oro_entity_config.provider.organization
        tags:
            - { name: oro_entity.exclusion_provider.default }

    oropro_organization.request.param_converter:
        class: %oropro_organization.request.param_converter.class%
        arguments:
            - @oro_entity_config.provider.organization
            - @oro_security.security_facade
            - @doctrine
        tags:
            - { name: request.param_converter, priority: 2, converter: applicable_organization_converter }

    oropro_organization.event_listener.authefication:
        class: %oropro_organization.event_listener.authefication.class%
        arguments:
            - @doctrine
            - @session
        tags:
            - { name: kernel.event_listener, event: security.authentication.success, method: onAuthenticationSuccess }
            - { name: kernel.event_listener, event: oro_security.event.organization_switch.after, method: onOrganizationSwitchAfter }
            - { name: kernel.event_listener, event: security.interactive_login, method: onInteractiveLogin }

    oropro_organization.content_provider.organization_switch:
        class: %oropro_organization.content_provider.organization_switch.class%
        arguments:
            - @twig
        tags:
            - { name: oro_ui.content_provider }
