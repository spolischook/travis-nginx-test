parameters:
    oro_user.entity.class:                                          Oro\Bundle\UserBundle\Entity\User
    oro_ldap.importexport.import.strategy.class:                    Oro\Bundle\LDAPBundle\ImportExport\UserImportStrategy
    oro_ldap.importexport.data_converter.user.class:                Oro\Bundle\LDAPBundle\ImportExport\UserDataConverter
    oro_ldap.importexport.serializer.class:                         Oro\Bundle\LDAPBundle\ImportExport\Serializer
    oro_ldap.importexport.writer.user.class:                        Oro\Bundle\LDAPBundle\ImportExport\LdapUserWriter
    oro_ldap.importexport.processor.user.export.class:              Oro\Bundle\LDAPBundle\ImportExport\ExportProcessor
    oro_ldap.importexport.helper.class:                             Oro\Bundle\LDAPBundle\ImportExport\LdapHelper

services:
    oro_ldap.importexport.serializer:
        class: %oro_ldap.importexport.serializer.class%
        arguments: [@oro_importexport.serializer]

    oro_ldap.importexport.import.strategy:
        class: %oro_ldap.importexport.import.strategy.class%
        parent: oro_importexport.strategy.configurable_add_or_replace
        arguments:
            - @oro_integration.helper.default_owner_helper
            - @oro_integration.provider.connector_context_mediator
            - @oro_ldap.importexport.helper

    oro_ldap.importexport.data_converter.user:
        class: %oro_ldap.importexport.data_converter.user.class%
        arguments: [@oro_integration.provider.connector_context_mediator, @oro_importexport.context_registry]

    oro_ldap.importexport.processor.user.import:
        parent: oro_importexport.processor.import_abstract
        calls:
           - [setDataConverter, [@oro_ldap.importexport.data_converter.user]]
           - [setSerializer, [@oro_ldap.importexport.serializer]]
           - [setStrategy, [@oro_ldap.importexport.import.strategy]]
        tags:
            - { name: oro_importexport.processor, type: import, entity: %oro_user.entity.class%, alias: oro_ldap_user_import }

    oro_ldap.importexport.processor.user.export:
        parent: oro_importexport.processor.export_abstract
        class: %oro_ldap.importexport.processor.user.export.class%
        arguments:
            - @oro_importexport.context_registry
        calls:
            - [setDataConverter, [@oro_ldap.importexport.data_converter.user]]
            - [setSerializer, [@oro_ldap.importexport.serializer]]
        tags:
            - { name: oro_importexport.processor, type: export, entity: %oro_user.entity.class%, alias: oro_ldap_user_export }

    oro_ldap.importexport.writer.user:
        class: %oro_ldap.importexport.writer.user.class%
        arguments: [@oro_importexport.context_registry, @oro_integration.provider.connector_context_mediator]

    oro_ldap.importexport.helper:
        class: %oro_ldap.importexport.helper.class%
        arguments: [@oro_integration.provider.connector_context_mediator, @doctrine]
