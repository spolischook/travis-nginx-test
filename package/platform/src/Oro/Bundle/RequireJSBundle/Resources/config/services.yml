parameters:
    oro_requirejs.twig.class:             Oro\Bundle\RequireJSBundle\Twig\OroRequireJSExtension
    oro_requirejs.provider.config.class:  Oro\Bundle\RequireJSBundle\Provider\Config

services:
    oro_requirejs.twig.requirejs_extension:
        class:                            %oro_requirejs.twig.class%
        arguments:
            - "@service_container"
        tags:
            - { name: twig.extension }

    oro_requirejs.cache:
          parent: oro.cache.abstract
          calls:
              - [setNamespace, [ 'oro_requirejs' ] ]

    oro_requirejs_config_provider:
        class: %oro_requirejs.provider.config.class%
        arguments:
            - '@service_container'
            - '@templating'
            - OroRequireJSBundle::require_config.js.twig
        calls:
            - [ setCache, [ '@oro_requirejs.cache' ] ]
        lazy: true

    oro_layout.provider.requirejs_config:
            class: Oro\Bundle\LayoutBundle\Provider\RequireJSConfigProvider
            arguments:
                - '@templating'
                - '@oro_requirejs.cache'
                - '%oro_require_js%'
                - '%kernel.bundles%'
                - '%oro_require_js.web_root%'
            calls:
                - [ setThemeManager, [ '@oro_layout.theme_manager' ] ]
                - [ setActiveTheme, [ '%oro_layout.default_active_theme%' ] ]
            tags:
                - { name: requirejs.config_provider, alias: oro_layout_requirejs_config_provider }
            lazy: true
