{% extends "OroCRMCallBundle:Call:activityLink.html.twig" %}

{% block action_controll %}
    {% set cssClass = 'btn icons-holder-text' %}

    {% if phone is defined %}
        {% set hangoutOptions = {
            invites: [{
                name: entity is not empty ? entity|escape('html') : '',
                id: phone is not empty ? phone|escape('html') : '',
                invite_type: 'PHONE'
            }]
        } %}
        {% if entity is defined and isCallLogApplicable(entity) %}
            {# options -- are configuration for log-call button #}
            {% set extraComponentOptions = {
                onAppStartOptions: {
                    widgetComponentOptions: options.widget|merge({
                        options: options.widget.options|merge({
                            url: options.dataUrl
                        })
                    }),
                    targetComponentName: 'log-hangour-call-component'
                }
            } %}
        {% endif %}

    {% elseif email is defined %}
        {% set hangoutOptions = {
            invites: [{
                name: entity is not empty ? entity|escape('html') : '',
                id: email is not empty ? email|escape('html') : '',
                invite_type: 'EMAIL',
            }]
        } %}
    {% endif %}

    {% include "OroCRMHangoutsCallBundle::inviteHangoutLink.html.twig" %}
{% endblock %}
