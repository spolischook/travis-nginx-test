{% block _account_sidebar_widget %}
    {% set attr = layout_attr_defaults(attr, {
        '~class': " sidebar__menu sidebar__menu--collapsable account-menu"
    }) %}
    <div {{ block('block_attributes') }}>
        <div class="collapse-view expanded"
             data-page-component-module="oroui/js/app/components/jquery-widget-component"
             data-page-component-options="{{ {
                 widgetModule: 'orob2bfrontend/default/js/widgets/collapse-widget'
             }|json_encode() }}"
        >
            <a href="#" class="main-menu__link main-menu__link--is-trigger" data-collapse-trigger>
                <span class="badge badge_md badge_circle badge_orange account-menu__badge">
                    <i class="icon-cogs"></i>
                </span>
                <span class="collapse-view__trigger collapse-view__trigger--icon" data-collapse-trigger>
                    <i class="collapse-view__trigger-icon cf-play cf--gray" data-toggle="collapse"></i>
                </span>
                <span class="collapse-view__text">{{ 'orob2b.account.frontend.menu.account_user_profile.label'|trans }}</span>
            </a>
            <ul class="account-menu__list" data-collapse-container>
                {% set requestUrl = path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) %}
                {% set found = false %}

                {% for child in block if child.vars.visible %}
                    {% set currentUrl = path(child.vars.route_name, child.vars.route_parameters) %}

                    <li class="account-menu__item {% if currentUrl in requestUrl and not found %}account-menu__item--current{% endif %}">
                        {{ block_widget(child, {
                            attr: layout_attr_defaults(child.vars.attr, {
                                '~class': ' account-menu__link'
                            })
                        }) }}
                    </li>

                    {% if currentUrl in requestUrl and not found %}
                        {% set found = true %}
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}
