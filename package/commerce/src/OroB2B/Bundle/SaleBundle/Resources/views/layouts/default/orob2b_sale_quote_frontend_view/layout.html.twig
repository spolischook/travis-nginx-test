{% block _quote_view_top_widget %}
    <div class="mmb5-md mmb5-sm">{{ 'oro.ui.created_at'|trans }}: {{ quote.createdAt ? quote.createdAt|oro_format_datetime : 'N/A' }}</div>
    <div class="mmb5-md mmb5-sm">{{ 'oro.ui.updated_at'|trans }}: {{ quote.updatedAt ? quote.updatedAt|oro_format_datetime : 'N/A' }}</div>
{% endblock %}


{% block _quote_view_controls_list_widget %}
    <ul class="oro-order__controls-list">
        <li><a href="#"><i class="cf-reply"></i>Share</a></li>
        <li><a href="#"><i class="cf-print"></i>Print</a></li>
        <li><a href="#"><i class="cf-insert_drive_file"></i>Save PDF</a></li>
    </ul>
{% endblock %}

{% block _quote_view_information_widget %}
    <div class="account-oq-container">
        <div class="account-oq__item__head">
            <div class="account-oq__item account-oq__item_full mb0-sm">
                <h2 class="account-oq__item__title">
                    {{ 'orob2b.frontend.sale.quote.sections.general'|trans }}
                </h2>
            </div>
        </div>
        <div class="account-oq__item__body">
            <div class="account-oq__item">
                <div class="account-oq__order-info">
                    <table class="table borderless">
                        <tbody>
                        {% if quote.assignedUsers | length %}
                            <tr>
                                <td class="account-oq__order-info__title">{{ 'orob2b.frontend.sale.quote.assigned_account_users.label'|trans }}</td>
                                <td>
                                    {% set assigned_users = [] %}
                                    {% for entity in quote.assignedUsers %}
                                        {% set assigned_users = assigned_users|merge([entity.fullName]) %}
                                    {% endfor %}
                                    {{ assigned_users|join(', ') }}
                                </td>
                            </tr>
                        {% endif %}
                        <tr class="account-oq__order-info__control">
                            <td class="account-oq__order-info__title">{{ 'orob2b.frontend.sale.quote.valid_until.label'|trans }}</td>
                            <td>{{ quote.validUntil ? quote.validUntil|oro_format_datetime : 'N/A'|trans }}</td>
                        </tr>
                        <tr class="account-oq__order-info__control">
                            <td class="account-oq__order-info__title">{{ 'orob2b.frontend.sale.quote.po_number.label'|trans }}</td>
                            <td>{{ quote.poNumber|default('N/A'|trans) }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="account-oq__item">
                <div class="account-oq__order-info">
                    <table class="table borderless">
                        <tbody>
                        <tr class="account-oq__order-info__control">
                            <td class="account-oq__order-info__title">{{ 'orob2b.frontend.sale.quote.ship_until.label'|trans }}</td>
                            <td>{{ quote.shipUntil|oro_format_date|default('N/A'|trans) }}</td>
                        </tr>
                        {% if quote.shippingAddress %}
                            {% set name = [] %}
                            {% if quote.shippingAddress.namePrefix %}
                                {% set name = name|merge([quote.shippingAddress.namePrefix]) %}
                            {% endif %}
                            {% if quote.shippingAddress.firstName %}
                                {% set name = name|merge([quote.shippingAddress.firstName]) %}
                            {% endif %}
                            {% if quote.shippingAddress.middleName %}
                                {% set name = name|merge([quote.shippingAddress.middleName]) %}
                            {% endif %}
                            {% if quote.shippingAddress.lastName %}
                                {% set name = name|merge([quote.shippingAddress.lastName]) %}
                            {% endif %}
                            {% if quote.shippingAddress.nameSuffix %}
                                {% set name = name|merge([quote.shippingAddress.nameSuffix]) %}
                            {% endif %}
                            {% set rowspan = 3 %}
                            {% if name|length == 0 %}
                                {% set rowspan = 2 %}
                            {% endif %}
                            <tr class="account-oq__order-info__control">
                                <td class="account-oq__order-info__title" rowspan="{{ rowspan }}">{{ 'orob2b.frontend.sale.quote.shipping_address.label'|trans }}</td>
                                {% if name|length > 0 %}
                                <td>{{ name|join(' ') }}</td>
                            </tr>
                            <tr>
                                {% endif %}
                                <td>
                                    {% set address = [] %}
                                    {% if quote.shippingAddress.street %}
                                        {% set address = address|merge([quote.shippingAddress.street]) %}
                                    {% endif %}
                                    {% if quote.shippingAddress.street2 %}
                                        {% set address = address|merge([quote.shippingAddress.street2]) %}
                                    {% endif %}
                                    {% if quote.shippingAddress.organization %}
                                        {% set address = address|merge([quote.shippingAddress.organization]) %}
                                    {% endif %}
                                    {{ address|join(', ') }}
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    {% set address = [] %}
                                    {% if quote.shippingAddress.city %}
                                        {% set address = address|merge([quote.shippingAddress.city]) %}
                                    {% endif %}
                                    {% if quote.shippingAddress.country.name %}
                                        {% set address = address|merge([quote.shippingAddress.country.name]) %}
                                    {% endif %}
                                    {% if quote.shippingAddress.postalCode %}
                                        {% set address = address|merge([quote.shippingAddress.postalCode]) %}
                                    {% endif %}
                                    {{ address|join(', ') }}
                                    <br/>
                                    {{ quote.shippingAddress.phone }}
                                </td>
                            </tr>
                        {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}


{% block _quote_view_line_items_widget %}
    {% import 'OroUIBundle::macros.html.twig' as UI %}
    {% set maxChars = 60 %}
    <!-- START ITEMS ORDERED DESKTOP -->
    <div class="account-oq-container hidden-sm hidden-xs">
        <div class="account-oq__item account-oq__item_full">
            <div class="account-oq__item__head">
                <h2 class="account-oq__item__title">
                    {{ 'orob2b.frontend.sale.quote.sections.quote_products.label'|trans }}
                </h2>
            </div>
            <div class="account-oq__item__body">

                <table class="oro-grid-table oro-grid-table__orders">
                    <thead>
                    <tr>
                        <th>{{ 'orob2b.frontend.sale.quote.sections.quote_products.columns.item'|trans }}</th>
                        <th class="text-center">{{ 'orob2b.frontend.sale.quote.sections.quote_products.columns.quantity'|trans }}</th>
                        <th class="text-right">{{ 'orob2b.frontend.sale.quote.sections.quote_products.columns.unit_price'|trans }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for quoteProduct in quote.quoteProducts %}
                        {% for productOffer in quoteProduct.quoteProductOffers %}
                            <tr class="borderless">
                                {% if loop.first %}
                                    <td class="va-t_md" rowspan="{{ quoteProduct.quoteProductOffers|length }}">
                                        <h3 class="product-item__title product-item__title_in-cart mb1-md">
                                            {% if (quoteProduct.product.id is defined) %}
                                                {{ UI.link({
                                                    path: path('orob2b_product_frontend_product_view', {'id': quoteProduct.product.id}),
                                                    label : quoteProduct.productName,
                                                }) }}
                                            {% else %}
                                                {{ quoteProduct.productName }}
                                            {% endif %}
                                        </h3>
                                        <div>{{ 'orob2b.frontend.sale.quoteproduct.product_sku.label'|trans }}: {{ quoteProduct.productSku }}</div>
                                    </td>
                                {% endif %}
                                <td class="text-center va-t_md offset-top-s">{{ productOffer.quantity|orob2b_format_short_product_unit_value(productOffer.productUnit) }}</td>
                                <td class="text-right va-t_md offset-top-s">{{ productOffer.price|oro_format_price }}</td>
                            </tr>
                        {% endfor %}

                        {% if (quoteProduct.commentAccount is not empty) %}
                            <tr class="borderless">
                                <td colspan="3">
                                    <div class="account-oq__order-item-more">
                                         <span data-oro-expand-widget>
                                            {% if (quoteProduct.commentAccount|length > maxChars) %}
                                                <i class="cf-play" data-oro-expand-trigger></i>
                                            {% endif %}
                                            {{ 'orob2b.frontend.sale.quoteproduct.comment_account.label'|trans }}: <span data-oro-expand-container max-length="{{ maxChars }}">{{ quoteProduct.commentAccount }}</span>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        {% endif %}

                        {% if (quoteProduct.comment is not empty) %}
                            <tr class="borderless">
                                <td colspan="3">
                                    <div class="account-oq__order-item-more">
                                        <span data-oro-expand-widget>
                                            {% if (quoteProduct.comment|length > maxChars) %}
                                                <i class="cf-play" data-oro-expand-trigger></i>
                                            {% endif %}
                                            {{ 'orob2b.frontend.sale.quoteproduct.comment.label'|trans }}: <span data-oro-expand-container max-length="{{ maxChars }}">{{ quoteProduct.comment }}</span>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        {% endif %}

                        <tr>
                            <td class="decor-row" colspan="3"></td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>

                <div class="order-checkout-widget order-checkout-widget_block text-right">
                    <div class="order-builder-clear-btn">
                        <a href="{{ path('orob2b_sale_quote_frontend_index') }}"><i class="cf-left-open-mini"></i><span>{{ 'orob2b.frontend.sale.quote.sections.back.label'|trans }}</span></a>
                    </div>

                    <div class="order-checkout-widget__container-wrapper">
                        <div class="order-checkout-widget__container order-checkout-widget__container_lg">
                            <table class="order-checkout-widget__table pull-right">
                                <tbody>
                                <tr>
                                    <td>Price Total</td>
                                    <td>$19,830.69</td>
                                </tr>
                                <tr>
                                    <td>Shipping Total</td>
                                    <td>$442.85</td>
                                </tr>
                                <tr>
                                    <td>Tax</td>
                                    <td>$200.87</td>
                                </tr>
                                <tr>
                                    <td class="order-checkout-widget__total"><span class="text-uppercase">total</span></td>
                                    <td class="order-checkout-widget__total"><span class="blue">$20,273.54</span></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END ITEMS ORDERED DESKTOP -->
{% endblock %}

{% block _quote_view_line_items_mobile_widget %}
    {% import 'OroUIBundle::macros.html.twig' as UI %}
    {% set maxChars = 60 %}
    <!-- START ITEMS ORDERED MOBILE -->
    <div class="account-oq-container hidden-lg hidden-md">
        <div class="account-oq__item account-oq__item_full">
            <div class="account-oq__item__head">
                <h2 class="account-oq__item__title">
                    {{ 'orob2b.frontend.sale.quote.sections.quote_products.label'|trans }}
                </h2>
            </div>
            <div class="account-oq__item__body">
                <table class="oro-grid-table oro-grid-table__orders oro-grid-table__orders_order-details">
                    <tbody>
                    {% for quoteProduct in quote.quoteProducts %}
                        <tr>
                            <td class="va-t_sm">
                                <h3 class="product-item__title product-item__title_in-cart mb1-md">
                                    {% if (quoteProduct.product.id is defined) %}
                                        {{ UI.link({
                                            path: path('orob2b_product_frontend_product_view', {'id': quoteProduct.product.id}),
                                            label : quoteProduct.productName,
                                        }) }}
                                    {% else %}
                                        {{ quoteProduct.productName }}
                                    {% endif %}
                                </h3>
                                <div>{{ 'orob2b.frontend.sale.quoteproduct.product_sku.label'|trans }}: {{ quoteProduct.productSku }}</div>

                                <div class="mt1-sm">
                                    <table class="table borderless paddingless mb0-sm">
                                        <tbody>
                                        <tr>
                                            <td class="text-left">{{ 'orob2b.frontend.sale.quote.sections.quote_products.columns.quantity'|trans }}</td>
                                            <td class="text-left">{{ 'orob2b.frontend.sale.quote.sections.quote_products.columns.unit_price'|trans }}</td>
                                        </tr>
                                        {% for productOffer in quoteProduct.quoteProductOffers %}
                                            <tr>
                                                <td class="text-left">{{ productOffer.quantity|orob2b_format_product_unit_code(productOffer.productUnit) }}</td>
                                                <td class="text-left">{{ productOffer.price|oro_format_price }}</td>
                                            </tr>
                                        {% endfor %}
                                    </table>
                                </div>
                            </td>
                        </tr>
                        {% if (quoteProduct.commentAccount is not empty) %}
                            <tr class="borderless t_paddingless">
                                <td colspan="2">
                                    <div class="account-oq__order-item-more">
                                        <span data-oro-expand-widget>
                                            {% if (quoteProduct.commentAccount|length > maxChars) %}
                                                <i class="cf-play" data-oro-expand-trigger></i>
                                            {% endif %}
                                            {{ 'orob2b.frontend.sale.quoteproduct.comment_account.label'|trans }}: <span data-oro-expand-container max-length="{{ maxChars }}">{{ quoteProduct.commentAccount }}</span>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        {% endif %}

                        {% if (quoteProduct.comment is not empty) %}
                            <tr class="borderless t_paddingless">
                                <td colspan="2">
                                    <div class="account-oq__order-item-more">
                                        <span data-oro-expand-widget>
                                            {% if (quoteProduct.comment|length > maxChars) %}
                                                <i class="cf-play" data-oro-expand-trigger></i>
                                            {% endif %}
                                            {{ 'orob2b.frontend.sale.quoteproduct.comment.label'|trans }}: <span data-oro-expand-container max-length="{{ maxChars }}">{{ quoteProduct.comment }}</span>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                    </tbody>
                </table>

                <div class="order-checkout-widget order-checkout-widget_block text-right">
                    <div class="order-checkout-widget__container-wrapper">
                        <div class="order-checkout-widget__container order-checkout-widget__container_lg">
                            <table class="order-checkout-widget__table pull-right">
                                <tbody>
                                <tr>
                                    <td>Price Total</td>
                                    <td>$19,830.69</td>
                                </tr>
                                <tr>
                                    <td>Shipping Total</td>
                                    <td>$442.85</td>
                                </tr>
                                <tr>
                                    <td>Tax</td>
                                    <td>$200.87</td>
                                </tr>
                                <tr>
                                    <td class="order-checkout-widget__total"><span class="text-uppercase">total</span></td>
                                    <td class="order-checkout-widget__total"><span class="blue">$20,273.54</span></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <a href="{{ path('orob2b_sale_quote_frontend_index') }}"><i class="cf-left-open-mini"></i><span>{{ 'orob2b.frontend.sale.quote.sections.back.label'|trans }}</span></a>
            </div>
        </div>
    </div>
    <!-- END ITEMS ORDERED MOBILE -->
{% endblock %}

{% block _quote_view_page_widget %}
    {% set attr = attr|merge({class: attr.class|default('') ~ " quote"}) %}
    <div{{ block('block_attributes') }}>
        {{ block_widget(block) }}
    </div>
{% endblock %}

{% block _quote_view_accept_container_widget %}
    {% set attr = attr|merge({class: attr.class|default('') ~ " order-checkout-widget order-checkout-widget_block text-right mb4-md"}) %}
    <div{{ block('block_attributes') }}>
        {{ block_widget(block) }}
    </div>
{% endblock %}

{% block _quote_view_accept_button_widget %}
    <div{{ block('block_attributes') }}>
        {{ block_widget(block) }}
    </div>
{% endblock %}
