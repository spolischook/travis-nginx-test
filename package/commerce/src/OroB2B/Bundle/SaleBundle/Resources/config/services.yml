parameters:
    orob2b_sale.entity.quote.class: OroB2B\Bundle\SaleBundle\Entity\Quote
    orob2b_sale.entity.quote_product.class: OroB2B\Bundle\SaleBundle\Entity\QuoteProduct
    orob2b_sale.entity.quote_product_offer.class: OroB2B\Bundle\SaleBundle\Entity\QuoteProductOffer
    orob2b_sale.entity.quote_product_request.class: OroB2B\Bundle\SaleBundle\Entity\QuoteProductRequest
    orob2b_sale.quote.manager.api.class: Oro\Bundle\SoapBundle\Entity\Manager\ApiEntityManager
    #Providers
    orob2b_sale.provider.quote_product_price.class: OroB2B\Bundle\SaleBundle\Provider\QuoteProductPriceProvider
    #Models
    orob2b_sale.service.quote_to_order_converter.class: OroB2B\Bundle\SaleBundle\Model\QuoteToOrderConverter
    orob2b_sale.service.quote_product_offer_matcher.class: OroB2B\Bundle\SaleBundle\Model\QuoteProductOfferMatcher
    #Formatters
    orob2b_sale.formatter.quote_product.class: OroB2B\Bundle\SaleBundle\Formatter\QuoteProductFormatter
    orob2b_sale.formatter.quote_product_offer.class: OroB2B\Bundle\SaleBundle\Formatter\QuoteProductOfferFormatter

    #Validators
    orob2b_sale.validator.quote_product.class: OroB2B\Bundle\SaleBundle\Validator\Constraints\QuoteProductValidator
    orob2b_sale.validator.quote_product_unit.class: OroB2B\Bundle\SaleBundle\Validator\Constraints\QuoteProductOfferValidator

    #Twig extensions
    orob2b_sale.twig.quote.class: OroB2B\Bundle\SaleBundle\Twig\QuoteExtension

    orob2b_sale.helper.notification.class: OroB2B\Bundle\SaleBundle\Notification\NotificationHelper

services:
    orob2b_sale.quote.manager.api:
        class: %orob2b_sale.quote.manager.api.class%
        parent: oro_soap.manager.entity_manager.abstract
        arguments:
            - %orob2b_sale.entity.quote.class%
            - @doctrine.orm.entity_manager

    orob2b_sale.provider.quote_product_price:
            class: %orob2b_sale.provider.quote_product_price.class%
            arguments:
                - @orob2b_pricing.provider.product_price
                - @orob2b_pricing.model.frontend.price_list_request_handler

    orob2b_sale.validator.quote_product:
        class: %orob2b_sale.validator.quote_product.class%
        tags:
            - { name: validator.constraint_validator, alias: orob2b_sale.validator.quote_product }

    orob2b_sale.validator.quote_product_unit:
        class: %orob2b_sale.validator.quote_product_unit.class%
        tags:
            - { name: validator.constraint_validator, alias: orob2b_sale.validator.quote_product_unit }

    orob2b_sale.twig.quote:
        class: %orob2b_sale.twig.quote.class%
        arguments:
            - @orob2b_sale.formatter.quote_product
        tags:
            - { name: twig.extension }

    orob2b_sale.formatter.quote_product:
        class: %orob2b_sale.formatter.quote_product.class%
        arguments:
            - @translator
            - @oro_locale.formatter.number
            - @orob2b_product.formatter.product_unit_value
            - @orob2b_product.formatter.product_unit_label

    orob2b_sale.formatter.quote_product_offer:
        class: %orob2b_sale.formatter.quote_product_offer.class%
        arguments:
            - @translator

    orob2b_sale.service.quote_to_order_converter:
        class: %orob2b_sale.service.quote_to_order_converter.class%
        arguments:
            - @orob2b_order.model.order_currency_handler
            - @orob2b_order.provider.subtotals
            - @doctrine

    orob2b_sale.service.quote_product_offer_matcher:
        class: %orob2b_sale.service.quote_product_offer_matcher.class%

    orob2b_sale.event_listener.product_select_db_query:
        class: %orob2b_product.event_listener.scoped_product_select_db_query.class%
        parent: orob2b_product.event_listener.abstract_product_select_db_query
        calls:
            - [setScope, ['quote']]
            - [setBackendSystemConfigurationPath, ['oro_b2b_sale.backend_product_visibility']]
        tags:
            - { name: kernel.event_listener, event: orob2b_product.product_select.db.query, method: onDBQuery }

    orob2b_sale.helper.notification:
        class: %orob2b_sale.helper.notification.class%
        scope: request
        arguments:
            - @doctrine
            - @request
            - @oro_email.email.model.builder
            - @oro_email.mailer.processor
        calls:
            - [ setQuoteClassName, [ %orob2b_sale.entity.quote.class% ] ]
            - [ setEmailTemplateClassName, [ %oro_email.emailtemplate.entity.class% ] ]
