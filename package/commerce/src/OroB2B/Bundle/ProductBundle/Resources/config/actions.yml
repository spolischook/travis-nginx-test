actions:
    orob2b_product_duplicate_action:
        label: orob2b.product.ui.duplicate
        applications: [backend]
        routes:
            - orob2b_product_view
        datagrids:
            - products-grid
        acl_resource: orob2b_product_create
        order: 10
        button_options:
            icon: icon-copy
        functions:
            - @call_service_method:
                service: orob2b_product.service.duplicator
                method: duplicate
                method_parameters: [$.data]
                attribute: $.productCopy
            - @redirect:
                parameters:
                    route: orob2b_product_view
                    route_parameters:
                        id: $.productCopy.id
            - @call_service_method:
                attribute: $.hasSuccessMessage
                service: session.flash_bag
                method: has
                method_parameters: ['success']
            - @flash_message:
                conditions:
                    @equal: [$.hasSuccessMessage, false]
                parameters:
                    message: orob2b.product.controller.product.duplicated.message
                    type: 'success'
