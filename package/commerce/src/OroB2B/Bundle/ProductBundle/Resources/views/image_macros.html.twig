{% macro url(file, filter) -%}
    {%- if file is not null %}
        {{- filtered_image_url(file, filter) -}}
    {% else %}
        {{- _self.urlFromString('', filter) -}}
    {% endif %}
{%- endmacro -%}

{% macro urlFromString(file, filter) -%}
    {%- if file is empty %}
        {% set file = '/bundles/orob2bproduct/default/images/no_image.png' %}
    {% endif %}
    {{- file|imagine_filter(filter) -}}
{%- endmacro -%}

{% macro image(file, filter) -%}
    <img src="{{ _self.url(file, filter) }}"/>
{%- endmacro -%}
